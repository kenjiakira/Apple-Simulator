<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Gi·∫£ L·∫≠p Qu·∫£ T√°o</title>
    <style>
         :root {
            --primary-color: #ff4500;
            --secondary-color: #4CAF50;
            --bg-color: #f4f4f4;
            --text-color: #333;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: var(--bg-color);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            padding: 20px; 
        }
        .apple-simulator {
            text-align: center;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            width: 100%;
            max-width: 450px;
            transition: all 0.3s ease;
        }
        .apple-container {
            position: relative;
            width: 100%;
            height: 250px;
            margin: 0 auto 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }
        .apple {
            position: absolute;
            width: 200px;
            height: 200px;
            background-color: #ff0800;
            border-radius: 50%;
            transform: rotate(45deg);
            box-shadow: inset -20px -20px 30px rgba(0,0,0,0.2), 10px 10px 30px rgba(0,0,0,0.1);
            transition: all 0.5s ease;
        }
        .apple-stem {
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%) rotate(-45deg);
            width: 15px;
            height: 50px;
            background-color: #2d4029;
            border-radius: 10px;
            z-index: 10;
            transition: transform 0.3s ease;
        }
        .apple-leaf {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translate(-50%, 0) rotate(30deg);
            width: 50px;
            height: 50px;
            background-color: #6db33f;
            border-radius: 50% 0;
            z-index: 10;
            transition: transform 0.3s ease;
        }
        .control-panel {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap; 
        }
        .button {
            padding: 12px 20px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            font-size: 14px; 
        }
        .button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: all 0.5s;
        }
        .button:hover:before {
            left: 100%;
        }
        .button:hover {
            transform: scale(1.05);
            background-color: #45a049;
        }
        .button:active {
            transform: scale(0.95);
        }
        .ripeness-display {
            font-size: 16px;
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }
        .progress-indicator {
            height: 100%;
            background-color: #ff4500;
            transition: width 0.3s ease;
        }
        .info-display {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .sound-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 24px;
        }

        @keyframes fly {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(30px, -20px) rotate(20deg); }
            50% { transform: translate(-40px, 30px) rotate(-15deg); }
            75% { transform: translate(20px, -10px) rotate(10deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        @keyframes flyAway {
            0% { transform: translate(0, 0) rotate(0deg) scale(1); }
            50% { transform: translate(100px, -100px) rotate(45deg) scale(1.2); }
            100% { transform: translate(200px, -200px) rotate(90deg) scale(1.5); opacity: 0; }
        }

        .fly {
            position: absolute;
            width: 10px;
            height: 5px;
            background-color: #333;
            border-radius: 50%;
            animation: fly 2s infinite linear;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .fly:nth-child(1) { 
            animation-delay: 0s;
            top: 50px;
            left: 100px;
        }
        .fly:nth-child(2) { 
            animation-delay: 0.5s;
            top: 30px;
            right: 100px;
        }
        .fly:nth-child(3) { 
            animation-delay: 1s;
            bottom: 50px;
            left: 80px;
        }
        .fly:nth-child(4) { 
            animation-delay: 1.5s;
            bottom: 30px;
            right: 80px;
        }

        @media (max-width: 600px) {
            .apple-container {
                height: 200px; 
            }
            .apple {
                width: 180px;
                height: 180px;
            }
            .control-panel {
                flex-direction: column;
                gap: 10px;
            }
            .button {
                padding: 12px;
                width: 100%; 
            }
            .ripeness-display {
                font-size: 14px;
            }
            .info-display {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="apple-simulator">
        <button class="sound-toggle" id="sound-toggle" onclick="toggleSound()">üîä</button>
        
        <div class="apple-container" id="apple-container">
            <div class="apple" id="apple"></div>
            <div class="apple-stem" id="apple-stem"></div>
            <div class="apple-leaf" id="apple-leaf"></div>
            
            <div class="fly" id="fly1"></div>
            <div class="fly" id="fly2"></div>
            <div class="fly" id="fly3"></div>
            <div class="fly" id="fly4"></div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-indicator" id="ripeness-progress"></div>
        </div>

        <div class="ripeness-display" id="ripeness-text">ƒê·ªô Ch√≠n: Trung B√¨nh</div>

        <div class="control-panel">
            <button class="button" onclick="changeRipeness('lighter')">Ch√≠n Nh·∫°t</button>
            <button class="button" onclick="changeRipeness('reset')">ƒê·∫∑t L·∫°i</button>
            <button class="button" onclick="changeRipeness('darker')">Ch√≠n ƒê·∫≠m</button>
        </div>

        <div class="info-display" id="info-display">
            <p id="info-details">Th√¥ng tin chi ti·∫øt v·ªÅ ƒë·ªô </p>
        </div>
    </div>

    <audio id="ripeSound" src="sound/button-09.mp3"></audio>
    <audio id="unripeSound" src="sound/button-11.mp3"></audio>
    <audio id="rottenSound" src="sound/fly.mp3"></audio>

    <script>
        let ripeness = 0.5;
        let soundEnabled = true;
        const apple = document.getElementById('apple');
        const appleStem = document.getElementById('apple-stem');
        const appleLeaf = document.getElementById('apple-leaf');
        const ripenessText = document.getElementById('ripeness-text');
        const ripenessProgress = document.getElementById('ripeness-progress');
        const infoDisplay = document.getElementById('info-display');
        const soundToggle = document.getElementById('sound-toggle');
        const ripeSound = document.getElementById('ripeSound');
        const unripeSound = document.getElementById('unripeSound');
        const rottenSound = document.getElementById('rottenSound');
        const appleContainer = document.getElementById('apple-container');

        const flies = [
            document.getElementById('fly1'),
            document.getElementById('fly2'),
            document.getElementById('fly3'),
            document.getElementById('fly4')
        ];

        function toggleSound() {
            soundEnabled = !soundEnabled;
            soundToggle.textContent = soundEnabled ? 'üîä' : 'üîá';
        }
function playSound(isRipe) {
    if (soundEnabled) {
        if (ripeness > 1) {
            rottenSound.volume = 0.2; 
            rottenSound.loop = true;  
            rottenSound.play();
        } else {
            rottenSound.loop = false;
            rottenSound.pause();
            rottenSound.currentTime = 0;
            
            if (isRipe) {
                ripeSound.volume = 0.3; 
                ripeSound.play();
            } else {
                unripeSound.volume = 0.3; 
                unripeSound.play();
            }
        }
    }
}


        function toggleFlies(show) {
            flies.forEach(fly => {
                fly.style.opacity = show ? '1' : '0';
            });
        }
        appleContainer.addEventListener('mousemove', (event) => {
            const containerRect = appleContainer.getBoundingClientRect();
            const mouseX = event.clientX - containerRect.left;
            const mouseY = event.clientY - containerRect.top;

            flies.forEach((fly, index) => {
          
                const flyX = fly.offsetLeft;
                const flyY = fly.offsetTop;
                
                const distanceX = Math.abs(flyX - mouseX);
                const distanceY = Math.abs(flyY - mouseY);
                
                if (distanceX < 50 && distanceY < 50 && fly.style.opacity === '1') {
                    fly.style.animation = 'flyAway 1s forwards';
                    
                    setTimeout(() => {
                        fly.style.animation = 'fly 2s infinite linear';
                        fly.style.animationDelay = `${index * 0.5}s`;
                    }, 1000);
                }
            });
        });

        function changeRipeness(direction) {
            let oldRipeness = ripeness;

            switch(direction) {
                case 'lighter':
                    ripeness = Math.max(0, ripeness - 0.1);
                    break;
                case 'darker':
                    ripeness = Math.min(1.2, ripeness + 0.1);  
                    break;
                case 'reset':
                    ripeness = 0.5;
                    break;
            }

            let red, green, color, infoDetails;

            if (ripeness > 1) {
                red = 139; 
                green = 69;
                color = `rgb(${red}, ${green}, 19)`;  
                ripenessText.textContent = 'ƒê·ªô Ch√≠n: H·ªèng';
                infoDetails = 'T√°o ƒë√£ h·ªèng, c√≥ d·∫•u hi·ªáu m·ªÅm nh≈©n v√† m√πi kh√≥ ch·ªãu. Kh√¥ng n√™n s·ª≠ d·ª•ng.';    
                toggleFlies(true);
            } else {
                toggleFlies(false);
                red = Math.floor(255 * (0.5 + ripeness / 2));
                green = Math.floor(255 * (1 - ripeness));
                color = `rgb(${red}, ${green}, 0)`;  

                if (ripeness < 0.3) {
                    ripenessText.textContent = 'ƒê·ªô Ch√≠n: Xanh';
                    infoDetails = 'T√°o c√≤n xanh, c·ª©ng v√† ch∆∞a ch√≠n. Kh√¥ng ng·ªçt v√† c√≥ v·ªã h∆°i chua.';
                } else if (ripeness < 0.7) {
                    ripenessText.textContent = 'ƒê·ªô Ch√≠n: Trung B√¨nh';
                    infoDetails = 'T√°o ƒëang trong giai ƒëo·∫°n ch√≠n d·∫ßn. B·∫Øt ƒë·∫ßu c√≥ v·ªã ng·ªçt nh·∫π v√† m·ªÅm h∆°n.';
                } else {
                    ripenessText.textContent = 'ƒê·ªô Ch√≠n: Ch√≠n M·ªçng';
                    infoDetails = 'T√°o ch√≠n ho√†n to√†n, r·∫•t ng·ªçt v√† m·ªÅm. Th√≠ch h·ª£p ƒë·ªÉ ƒÉn ngay.';
                }
            }

            apple.style.backgroundColor = color;
            appleStem.style.transform = `translateX(-50%) rotate(${-45 + Math.min(ripeness, 1) * 30}deg)`;  
            appleLeaf.style.transform = `translate(-50%, 0) rotate(${30 - Math.min(ripeness, 1) * 20}deg)`; 
            
            
            ripenessProgress.style.width = `${Math.min(ripeness, 1) * 100}%`;

            if (oldRipeness !== ripeness) {
                playSound(ripeness >= 0.7 && ripeness <= 1);  
            }
            document.getElementById('info-details').textContent = infoDetails;
        }
    </script>
</body>
</html>
